<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>3D Services</title>
  <link rel="stylesheet" href="css/styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600;700&display=swap" rel="stylesheet">
  
  <!-- Slick CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <link rel="icon" href="./images/favicon.png" type="image/png" /> 

  <!-- <link rel="preload" as="image" href="posters/drone-end.jpg">
  <link rel="preload" as="image" href="posters/laser-end.jpg">
  <link rel="preload" as="video" href="videos/drone-to-laser.mp4" type="video/mp4">
  <link rel="preload" as="video" href="videos/laser-to-drone.mp4" type="video/mp4"> -->
  <link rel="preload" as="image" href="posters/bim-end.jpg">
  <link rel="preload" as="image" href="posters/topo-end.jpg">
  <link rel="preload" as="image" href="posters/utilities-end.jpg">
</head>

<body>

  <header class="navbar">
    <div class="container">
      <div class="logo">
        <a href="index.html">
          <img src="./images/SigLogo.png" alt="3D Services Logo" />
        </a>
        <a href="index.html">
          <span class="brand-name">3D Services</span>
        </a>
      </div>

      <div class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </div>

      <nav class="nav-links" id="mobile-nav">
        <a href="#about">About</a>
        <a href="#services">Services</a>
        <a href="#sectors">Sectors</a>
        <a href="#case_studies">Case Studies</a>
        <!-- <a href="#blog">Blog</a> -->
        <a href="team.html">Team</a>
        <a href="#contact">Contact Us</a>
      </nav>
    </div>
  </header>

  <section class="hero">
    <video class="hero-video" autoplay muted loop playsinline loading="lazy" poster="images/hero-fallback.jpg">
      <source src="./videos/Oxshott.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>

    <div class="hero-content">
      <h1><span class="years">35 years</span> of Surveying and Engineering Excellence</h1>
      <p>3D Services “Blending knowledge from the past with technology of the future”</p>
      <a href="#contact" class="btn">Get in Touch</a>
    </div>
  </section>

  <section class="output-viewer">
    <div class="container">

      <br>
      <br>

      <video id="viewer" autoplay muted playsinline preload="auto"></video>

      <div class="buttons">
        <button class="active-button" onclick="switchTo('drone')">DRONE</button>
        <button onclick="switchTo('laser')">LASER SCAN</button>
        <button onclick="switchTo('bim')">BIM</button>
        <button onclick="switchTo('topo')">TOPOGRAPHICAL</button>
        <button onclick="switchTo('utilities')">UTILITIES</button>
      </div>
      
      <br>
      <br>

    </div>
  </section>

  <!-- FRAME BY FRAME -->

  <!-- <section class="output-viewer">
    <div class="container">

      <br>
      <br>

      <canvas id="sequence" width="980" height="551"></canvas>

      <div class="buttons">
        <button onclick="playSequence('laser-to-drone')">DRONE</button>
        <button onclick="playSequence('drone-to-laser')">LASER SCAN</button>
      </div>
      
      <br>
      <br>

    </div>
  </section> -->

  <section class="services" id="services">
    <div class="container">
      <div class="services-grid">

        <a href="pages/services/land-surveys.html">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <div class="service_heading">
                  <h3>Land Surveys</h3>
                </div>
                <div class="img-holder img-1"></div>
              </div>
              <div class="flip-card-back">
                <h3>What We Do</h3>
                <p>We deliver accurate land and engineering surveys using advanced tools, providing clear, reliable data for developments of any size.</p>
                <a href="pages/services/land-surveys.html" class="btn">Read More</a>
              </div>
            </div>
          </div>
        </a>

        <a href="pages/services/measured-building-surveys.html">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <div class="service_heading">
                  <h3>Measured Building Surveys</h3>
                </div>
                <div class="img-holder img-2"></div>
              </div>
              <div class="flip-card-back">
                <h3>What We Do</h3>
                <p>We capture precise internal and external building details to create floor plans, elevations, and sections for planning and design.</p>
                <a href="pages/services/measured-building-surveys.html" class="btn">Read More</a>
              </div>
            </div>
          </div>
        </a>

        <a href="pages/services/laser-scanning.html">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <div class="service_heading">
                  <h3>Laser Scanning & 3D</h3>
                </div>
                <div class="img-holder img-3"></div>
              </div>
              <div class="flip-card-back">
                <h3>What We Do</h3>
                <p>Using 3D laser scanning, we quickly collect high-detail data for 2D drawings, CAD models, or BIM — even in complex spaces.</p>
                <a href="pages/services/laser-scanning.html" class="btn">Read More</a>
              </div>
            </div>
          </div>
        </a>

        <a href="pages/services/underground-surveys.html">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <div class="service_heading">
                  <h3>Utility Surveys</h3>
                </div>
                <div class="img-holder img-4"></div>
              </div>
              <div class="flip-card-back">
                <h3>What We Do</h3>
                <p>We detect and map underground utilities using GPR and EML tools, producing PAS 128-compliant surveys to reduce construction risk.</p>
                <a href="pages/services/underground-surveys.html" class="btn">Read More</a>
              </div>
            </div>
          </div>
        </a>

        <a href="pages/services/engineering.html">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <div class="service_heading">
                  <h3>Engineering</h3>
                </div>
                <div class="img-holder img-5"></div>
              </div>
              <div class="flip-card-back">
                <h3>What We Do</h3>
                <p>We provide precise setting-out and engineering control for builds of all scales, backed by fast, CAD-driven planning and execution.</p>
                <a href="pages/services/engineering.html" class="btn">Read More</a>
              </div>
            </div>
          </div>
        </a>

        <a href="pages/services/monitoring.html">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <div class="service_heading">
                  <h3>Monitoring</h3>
                </div>
                <div class="img-holder img-6"></div>
              </div>
              <div class="flip-card-back">
                <h3>What We Do</h3>
                <p>We monitor structures, land movement, vibration, and noise with flexible programs that deliver fast, accurate results and reporting.</p>
                <a href="pages/services/monitoring.html" class="btn">Read More</a>
              </div>
            </div>
          </div>
        </a>

        <a href="pages/services/photogrammetry.html">
          <div class="flip-card">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <div class="service_heading">
                  <h3>Photogrammetry</h3>
                </div>
                <div class="img-holder img-7"></div>
              </div>
              <div class="flip-card-back">
                <h3>What We Do</h3>
                <p>We use drone photogrammetry and 360 imagery to support mapping, modelling, inspections, and documentation — enhancing survey data.</p>
                <a href="pages/services/photogrammetry.html" class="btn">Read More</a>
              </div>
            </div>
          </div>
        </a>

      </div>  
        <!-- Add more cards as needed -->
      </div>
    </div>
  </section>

  <!-- <section class="offerings-section" id="sectors">
    <div class="container">
      <div class="offerings-header">
        <h2>Sectors we work with</h2>
      </div> -->
  
      <!-- Desktop Grid -->
      <!-- <div class="offerings-grid">
        <div class="offering-card">
          <img src="./images/construction.png" alt="Construction" />
          <div class="overlay"><h3>Construction</h3><span class="arrow">➔</span></div>
          <div class="active-bar"></div>
        </div>
        <div class="offering-card">
          <img src="./images/transportation.jpg" alt="Transportation" />
          <div class="overlay"><h3>Transportation</h3><span class="arrow">➔</span></div>
          <div class="active-bar"></div>
        </div>
        <div class="offering-card">
          <img src="./images/Project_6.jpg" alt="Infrastructure" />
          <div class="overlay"><h3>Infrastructure</h3><span class="arrow">➔</span></div>
          <div class="active-bar"></div>
        </div>
        <div class="offering-card">
          <img src="./images/Project_1.jpg" alt="Heritage" />
          <div class="overlay"><h3>Heritage</h3><span class="arrow">➔</span></div>
          <div class="active-bar"></div>
        </div>
        <div class="offering-card">
          <img src="./images/utilities.png" alt="Utilities" />
          <div class="overlay"><h3>Utilities</h3><span class="arrow">➔</span></div>
          <div class="active-bar"></div>
        </div>
      </div> -->
  
      <!-- Mobile Swiper -->
      <!-- <div class="swiper offerings-swiper">
        <div class="swiper-wrapper">
          <div class="swiper-slide">
            <div class="offering-card">
              <img src="./images/construction.png" alt="Construction" />
              <div class="overlay"><h3>Construction</h3><span class="arrow">➔</span></div>
              <div class="active-bar"></div>
            </div>
          </div>
          <div class="swiper-slide">
            <div class="offering-card">
              <img src="./images/transportation.jpg" alt="Transportation" />
              <div class="overlay"><h3>Transportation</h3><span class="arrow">➔</span></div>
              <div class="active-bar"></div>
            </div>
          </div>
          <div class="swiper-slide">
            <div class="offering-card">
              <img src="./images/Project_6.jpg" alt="Infrastructure" />
              <div class="overlay"><h3>Infrastructure</h3><span class="arrow">➔</span></div>
              <div class="active-bar"></div>
            </div>
          </div>
          <div class="swiper-slide">
            <div class="offering-card">
              <img src="./images/Project_1.jpg" alt="Heritage" />
              <div class="overlay"><h3>Heritage</h3><span class="arrow">➔</span></div>
              <div class="active-bar"></div>
            </div>
          </div>
          <div class="swiper-slide">
            <div class="offering-card">
              <img src="./images/utilities.png" alt="Utilities" />
              <div class="overlay"><h3>Utilities</h3><span class="arrow">➔</span></div>
              <div class="active-bar"></div>
            </div>
          </div>
        </div>
        <br>
        <br>
        <div class="swiper-pagination"></div>
      </div>
    </div>
  </section> -->
  
  

  <section class="about" id="about">
    <div class="overlay">
      <div class="container">
        <h2>Company Profile</h2><br>
        <div class="profile">
          <p>
            3D Services (South East) Ltd is a trusted land and engineering survey company, proudly serving the South East of England and beyond. Founded as a sole trader in 1989 by Nick Smith, who brings over 50 years of experience, the company became incorporated in 2011.
          </p>
          <p>
            With a rich history and a commitment to innovation, we continuously evolve by integrating research and development into our core services. This allows us to understand our clients' unique needs and deliver tailored, cost-effective solutions.
          </p>
          <p>
            Backed by a skilled team and state-of-the-art technology, we offer a diverse range of services, ensuring cutting-edge results and exceptional service every time.
          </p>
          <!-- <p>
            By continuously evaluating new technologies, we ensure efficient, cost-effective services across surveying, construction management, and planning consultancy.
          </p> -->
        </div>
      </div>

    </div>
  </section>

  <section class="testimonials">
    <div class="container">
      <h2>Words from our clients</h2>
  
      <div class="swiper testimonials-swiper">
        <div class="swiper-wrapper">
  
          <div class="swiper-slide">
            <div class="testimonial">
              <blockquote>“Thank you for sending the drawings through. I've had a quick look through and they look to be an impressive set of drawings. And you met your 'within a fortnight' target to deliver the images after your survey visit. Many thank to you and the team.”</blockquote>
              <cite>— St. Ann's Gate Architects</cite>
            </div>
          </div>
  
          <div class="swiper-slide">
            <div class="testimonial">
              <blockquote>“You are a star, thanks very much for a speedy turnaround!”</blockquote>
              <cite>— The Centaur Group</cite>
            </div>
          </div>
  
          <div class="swiper-slide">
            <div class="testimonial">
              <blockquote>“My initial comments on 3D Services is that they are very professional.”</blockquote>
              <cite>— Ground Control</cite>
            </div>
          </div>
  
          <!-- <div class="swiper-slide">
            <div class="testimonial">
              <blockquote>“The team was precise, responsive, and a pleasure to work with.”</blockquote>
              <cite>— Surrey Council</cite>
            </div>
          </div> -->
  
        </div>
        <br>
        <br>

        <div class="swiper-pagination"></div>
      </div>
    </div>
  </section>

  <section class="case-studies-section" id="case_studies">
    <div class="container">
      <br>
      <h2>Case Studies</h2>
  
      <div class="swiper case-studies-swiper">
        <div class="swiper-wrapper" id="case-cards-container">

          <script>
            fetch('case_studies.json')
              .then(response => response.json())
              .then(data => {
                const container = document.getElementById('case-cards-container');
                const currentPage = window.location.pathname.split("/").pop();
          
                data.forEach(cs => {
                  // Skip current page from showing in the "Other Case Studies" slider
                  if (cs.filename === currentPage) return;
          
                  const slide = document.createElement('div');
                  slide.className = 'swiper-slide';
                  slide.innerHTML = `
                    <a href="${cs.filename}">
                      <div class="case-study-card">
                        <img src="${cs.thumbnail}" alt="${cs.title}" />
                        <div class="case-info">
                          <h3>${cs.title}</h3>
                          <p>${cs.description || ''}</p>
                        </div>
                      </div>
                    </a>
                  `;
                  container.appendChild(slide);
                });
          
                new Swiper('.case-studies-swiper', {
                  slidesPerView: 1,
                  spaceBetween: 10,
                  pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                  },
                  breakpoints: {
                    768: { slidesPerView: 2 },
                    1024: { slidesPerView: 3 }
                  }
                });
              });
          </script>
          
        </div>
        
        <br>
        <br>
        <div class="swiper-pagination"></div>
      </div>
        <br>
    </div>
  </section>
  
  <!-- <section class="cta">
    <div class="container">
      <h2>Need a survey? Let’s talk.</h2>
      <a href="#contact" class="btn">Contact Us</a>
    </div>
  </section> -->

  <section class="contact-section" id="contact">
    <div class="container contact-container">
      <div class="contact-info">
        <h2>Get in touch.</h2>
        <div>
          <div class="contact-detail">
            <i class="fas fa-phone-alt"></i> 01428 684144
          </div>
          <div class="contact-detail">
            <i class="fas fa-envelope"></i>
            <a href="mailto:enquiries@3dservices.co.uk">enquiries@3dservices.co.uk</a>
          </div>
          <div class="contact-detail">
            <i class="fas fa-map-marker-alt"></i>
            3D Services (South East) Ltd,<br> Unit 5, Coopers Place,<br>Combe Lane,Wormley,<br> Surrey GU8 5SZ
          </div>
        </div>
      </div>
  
      <div class="contact-form-wrapper">
        <form class="contact-form" action="https://formsubmit.co/wilmar@3dservices.co.uk" method="POST">
          <h3>Send us a message.</h3>
  
          <div class="form-row">
            <input type="text" name="name" placeholder="Full Name" required>
            <input type="text" name="company" placeholder="Company (optional)">
          </div>

          <div class="form-row">
            <input type="email" name="email" placeholder="Email" required>
            <input type="text" name="phone" placeholder="Phone">
          </div>

          <div class="form-row">
            <textarea name="message" placeholder="Message (optional)" rows="10"></textarea>
          </div>
          
          <input type="hidden" name="_captcha" value="false">
          <input type="hidden" name="_next" value="https://wilmaryonex13.github.io/3D_website/thankyou.html">

          <div class="privacy-agreement">
            <small> 
              By submitting this form, you agree to our
              <a href="privacy.html" target="_blank">Privacy Policy</a>.
            </small>
          </div>

          <button type="submit" class="btn-submit">Send Message</button>
        </form>
      </div>

    </div>
  </section>
  

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="footer-top">
      <div class="container footer-grid">
        <a class="footer-logo-href" href="index.html">
            <div class="footer-logo-section">
                <div class="logo-combo">
                    <img src="./images/SigLogo_white.png">
                    <div>
                        <h2 class="footer-logo"><span class="highlight">3D Services</span> </h2>
                    </div>
                </div>
                <p>Surveyors and Construction Engineers</p>
            </div>
        </a>

        <div class="footer-contact">
          <h4>Contact</h4>
          <p><a href="mailto:contact@3dservices.co.uk">enquiries@3dservices.co.uk</a></p>
          <p>01428 684144</p>
        </div>

        <div class="footer-office">
          <h4>Registered Office</h4>
          <p>3D Services (South East) Ltd,<br> Unit 5, Coopers Place,<br>Combe Lane,Wormley,<br> Surrey GU8 5SZ</p>
        </div>

        <div class="footer-social">
            <h4>Social Media</h4>
            <div class="social-icons">
              <a href="https://x.com/3dservicesltd" target="_blank" rel="noopener">
                <img class="x" src="./images/X_logo.png" style="width: 20px; height: 20px;">
              </a>
              <a href="https://www.facebook.com/3dservices/"><i class="fab fa-facebook-f"></i></a>
              <a href="https://uk.linkedin.com/company/3d-services-south-east-ltd"><i class="fab fa-linkedin-in"></i></a>
              <!-- <a href="#"><i class="fab fa-youtube"></i></a> -->
              <a href="https://www.instagram.com/3dservices_south_east_ltd/"><i class="fab fa-instagram"></i></a>
            </div>
         </div>
      </div>
    </div>
  
    <div class="footer-bottom container">
      <p>© 2025 3D Services | Registered in England No. 12345678 | VAT No. 987654321</p>
      <a href="#" class="back-to-top">Back to Top ↑</a>
    </div>
  </footer>
  

  <script>
    document.querySelectorAll('.flip-card').forEach(card => {
      card.addEventListener('click', () => {
        card.querySelector('.flip-card-inner').classList.toggle('flipped');
      });
    });
  </script>

<!-- jQuery + Slick Carousel -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
  const testimonialSwiper = new Swiper('.testimonials-swiper', {
    slidesPerView: 1,
    spaceBetween: 20,
    loop: true,
    autoplay: {
      delay: 3000,
      disableOnInteraction: false
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true
    },
    breakpoints: {
      768: {
        slidesPerView: 2
      },
      1024: {
        slidesPerView: 3 // wider desktops
      }
    }
  });
</script>


<script>
  const hamburger = document.getElementById('hamburger');
  const navLinks = document.getElementById('mobile-nav');

  hamburger.addEventListener('click', () => {
    navLinks.classList.toggle('active');
    hamburger.classList.toggle('open');
  });

  //Close the menu when any link is clicked
  const navItems = document.querySelectorAll('#mobile-nav a');

  navItems.forEach(link => {
    link.addEventListener('click', () => {
      navLinks.classList.remove('active');
      hamburger.classList.remove('open');
    });
  });
</script>

<script>
  const cards = document.querySelectorAll('.offering-card');

  cards.forEach(card => {
    card.addEventListener('mouseenter', () => {
      cards.forEach(c => {
        c.classList.add('dimmed');
        c.classList.remove('hovered');
      });
      card.classList.add('hovered');
      card.classList.remove('dimmed');
    });

    card.addEventListener('mouseleave', () => {
      cards.forEach(c => {
        c.classList.remove('dimmed', 'hovered');
      });
    });
  });
</script>

<script>
  const offeringsSwiper = new Swiper(".offerings-swiper", {
    slidesPerView: 1,
    spaceBetween: 20,
    loop: true,
    pagination: {
      el: ".swiper-pagination",
      clickable: true
    }
  });

  // Only show Swiper on mobile
  function toggleOfferingsView() {
    const swiperEl = document.querySelector(".offerings-swiper");
    const gridEl = document.querySelector(".offerings-grid");

    if (window.innerWidth <= 768) {
      swiperEl.style.display = "block";
      gridEl.style.display = "none";
    } else {
      swiperEl.style.display = "none";
      gridEl.style.display = "flex";
    }
  }

  toggleOfferingsView();
  window.addEventListener("resize", toggleOfferingsView);
</script>


<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
  const caseSwiper = new Swiper('.case-studies-swiper', {
    slidesPerView: 1,
    spaceBetween: 10,
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    breakpoints: {
      768: {
        slidesPerView: 2
      },
      1024: {
        slidesPerView: 3
      }
    }
  });
</script>


<!-- Output Viewer -->

<script>
  const video = document.getElementById('viewer');

  // Current state (e.g., 'drone', 'laser')
  let currentView = 'drone';

  // Preload and set last frame as poster
  const posters = {
  drone: 'posters/drone-end.jpg',
  laser: 'posters/laser-end.jpg',
  bim: 'posters/bim-end.jpg',
  topo: 'posters/topo-end.jpg',
  utilities: 'posters/utilities-end.jpg',
};


const transitions = {
  'drone->laser': 'videos/drone-to-laser.mp4',
  'laser->drone': 'videos/laser-to-drone.mp4',
  'drone->bim': 'videos/drone-to-bim.mp4',
  'bim->drone': 'videos/bim-to-drone.mp4',
  'laser->bim': 'videos/laser-to-bim.mp4',
  'bim->laser': 'videos/bim-to-laser.mp4',
  'drone->topo': 'videos/drone-to-topo.mp4',
  'topo->drone': 'videos/topo-to-drone.mp4',
  'bim->topo': 'videos/bim-to-topo.mp4',
  'topo->bim': 'videos/topo-to-bim.mp4',
  'laser->topo': 'videos/laser-to-topo.mp4',
  'topo->laser': 'videos/topo-to-laser.mp4',
  'laser->utilities': 'videos/laser-to-utilities.mp4',
  'utilities->laser': 'videos/utilities-to-laser.mp4',
  'drone->utilities': 'videos/drone-to-utilities.mp4',
  'utilities->drone': 'videos/utilities-to-drone.mp4',
  'bim->utilities': 'videos/bim-to-utilities.mp4',
  'utilities->bim': 'videos/utilities-to-bim.mp4',
  'topo->utilities': 'videos/topo-to-utilities.mp4',
  'utilities->topo': 'videos/utilities-to-topo.mp4',
};

  // CODE WITHOUT DELAY

  // function switchTo(targetView) {
  //   if (targetView === currentView) return;

  //   const key = `${currentView}->${targetView}`;
  //   const transitionVideo = transitions[key];

  //   if (!transitionVideo) {
  //     alert("Transition video not found.");
  //     return;
  //   }

  //   video.src = transitionVideo;
  //   video.play();
  //   currentView = targetView;

  //   // When the video ends, freeze at the last frame
  //   video.onended = () => {
  //     video.pause();
  //     video.poster = posters[targetView]; // Show still frame
  //     // video.currentTime = video.duration; // Freeze exactly at the last frame
  //   };

  //     // Initialize to DRONE view
  //   window.onload = () => {
  //   video.poster = posters['drone']; // Show drone still frame
  //   // video.currentTime = 0;
  // };
  // }









  // CODE WITH DELAY

//   function switchTo(targetView) {
//   if (targetView === currentView) return;

//   const key = `${currentView}->${targetView}`;
//   const transitionVideo = transitions[key];

//   if (!transitionVideo) {
//     alert("Transition video not found.");
//     return;
//   }

//   video.poster = posters[currentView]; // keep current poster until ready

//   video.src = transitionVideo;
//   video.load();
//   video.play();
//   currentView = targetView;

//   video.oncanplaythrough = () => {
//     setTimeout(() => {
//       video.poster = ""; // Now remove poster cleanly after delay
//     }, 100); // delay 100ms or tweak to 200ms if needed
//   };

//   video.onended = () => {
//     video.pause();
//     video.poster = posters[targetView]; // Set poster after video ends
//   };
// }

//   // Initialize to DRONE view
//   window.onload = () => {
//     video.poster = posters['drone']; // Show drone still frame
//     // video.currentTime = 0;
//   };


  // CODE WITH IMAGE FALLBACK

  function switchTo(view) {
  const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
  const effectiveType = connection?.effectiveType || '';
  const saveData = connection?.saveData || false;
  const isSlow = ['2g', '3g'].includes(effectiveType) || saveData;

  const key = `${currentView}->${view}`;
  if (view === currentView) return;

  // Always update active button state
  document.querySelectorAll('.output-viewer .buttons button').forEach(btn => {
    btn.classList.remove('active-button');
  });
  const clickedBtn = document.querySelector(`.output-viewer .buttons button[onclick*="${view}"]`);
  if (clickedBtn) {
    clickedBtn.classList.add('active-button');
  }

  if (isSlow) {
    video.pause();
    video.removeAttribute('src');
    video.load();
    video.poster = posters[view];
    currentView = view;
    return;
  }

  const transitionVideo = transitions[key];
  if (!transitionVideo) {
    video.pause();
    video.removeAttribute('src');
    video.load();
    video.poster = posters[view];
    currentView = view;
    return;
  }

  video.poster = posters[currentView];
  video.src = transitionVideo;
  video.load();
  video.play();
  currentView = view;

  video.oncanplaythrough = () => {
    setTimeout(() => {
      video.poster = '';
    }, 200);
  };

  video.onended = () => {
    video.pause();
    video.poster = posters[view];
  };
}



    // Initialize to DRONE view
    window.onload = () => {
    video.poster = posters['drone']; // Show drone still frame
    // video.currentTime = 0;
  };


// CODE WITH BACKGROUND IMAGE AND DEFUALT VIEWER CONSIDERATION

//   function switchTo(targetView) {
//   if (targetView === currentView) return;

//   const key = `${currentView}->${targetView}`;
//   const transitionVideo = transitions[key];

//   if (!transitionVideo) {
//     alert("Transition video not found.");
//     return;
//   }

//   // Set background image to current view's poster
//   video.style.backgroundImage = `url(${posters[currentView]})`;
//   video.poster = posters[currentView]; // Optional fallback
//   video.src = transitionVideo;
//   video.load();
//   video.play();
//   currentView = targetView;

//   video.oncanplaythrough = () => {
//     setTimeout(() => {
//       video.poster = ""; // Remove poster if used
//       video.style.backgroundImage = "none"; // Fade out bg-image
//     }, 100);
//   };

//   video.onended = () => {
//     video.pause();
//     video.poster = posters[targetView];
//     video.style.backgroundImage = `url(${posters[targetView]})`; // Set background for new frozen state
//   };
// }

//CODE WITHOUT USING POSTER
// const video = document.getElementById('viewer');
// let currentView = 'drone';

// // Transition video mapping
// const transitions = {
//   'drone->laser': 'videos/drone-to-laser.mp4',
//   'laser->drone': 'videos/laser-to-drone.mp4',
// };

// // Initial video that looks like a still frame (e.g., first frame of 'drone->laser')
// window.onload = () => {
//   video.src = transitions['drone->laser'];
//   video.load();

//   video.onloadeddata = () => {
//     video.pause();         // Freeze on first frame
//     video.currentTime = 0; // Ensure it's the first frame
//   };
// };

// // Function to switch between views
// function switchTo(targetView) {
//   if (targetView === currentView) return;

//   const key = `${currentView}->${targetView}`;
//   const transitionVideo = transitions[key];

//   if (!transitionVideo) {
//     alert("Transition video not found.");
//     return;
//   }

//   video.src = transitionVideo;
//   video.load();

//   video.onloadeddata = () => {
//     video.play();
//   };

//   video.onended = () => {
//     video.pause();
//     video.currentTime = video.duration; // Freeze at last frame
//   };

//   currentView = targetView;
// }


</script>


<!-- <script>
  const video = document.getElementById('viewer');
  let currentView = 'drone';

  const transitions = {
    'drone->laser': 'videos/drone-to-laser.mp4',
    'laser->drone': 'videos/laser-to-drone.mp4',
  };

  // Initialize: show the first frame of a transition video
  window.onload = () => {
    video.src = transitions['drone->laser'];
    video.load();
    video.onloadeddata = () => {
      video.pause();
      video.currentTime = 0;
    };
  };

  function switchTo(targetView) {
    if (targetView === currentView) return;

    const key = `${currentView}->${targetView}`;
    const transitionVideo = transitions[key];

    if (!transitionVideo) {
      alert("Transition video not found.");
      return;
    }

    // 1. Freeze the viewer (hold previous view) for a short moment
    const previousSrc = video.src;
    video.pause();

    // 2. Delay applying the new source — allow browser to hold frame
    setTimeout(() => {
      video.src = transitionVideo;
      video.load();

      video.onloadeddata = () => {
        video.play();
      };

      video.onended = () => {
        video.pause();
        video.currentTime = video.duration;
      };

      currentView = targetView;
    }, 150); // ← Try 100–200ms here. Adjust if needed.
  }
</script> -->



<!-- OPACITY CHANGE -->

<!-- 
<script>
  const video = document.getElementById('viewer');
  let currentView = 'drone';

  const transitions = {
    'drone->laser': 'videos/drone-to-laser.mp4',
    'laser->drone': 'videos/laser-to-drone.mp4',
  };

  window.onload = () => {
    video.src = transitions['drone->laser'];
    video.load();
    video.onloadeddata = () => {
      video.pause();
      video.currentTime = 0;
    };
  };

  function switchTo(targetView) {
    if (targetView === currentView) return;

    const key = `${currentView}->${targetView}`;
    const transitionVideo = transitions[key];

    if (!transitionVideo) {
      alert("Transition video not found.");
      return;
    }

    // Hold the current frame for a bit
    video.pause();
    video.style.opacity = 0;

    setTimeout(() => {
      video.src = transitionVideo;
      video.load();

      video.onloadeddata = () => {
        video.play();
        video.style.opacity = 1;
      };

      video.onended = () => {
        video.pause();
        video.currentTime = video.duration;
      };

      currentView = targetView;
    }, 200); // Delay of 150ms to prevent blip
  }
</script> -->



<!-- FRAME BY FRAME -->
<!-- <script>
  const canvas = document.getElementById('sequence');
  const ctx = canvas.getContext('2d');

  const config = {
    fps: 24,
    frameCount: 90, // Adjust based on how many frames you have
    frameWidth: 980,
    frameHeight: 551,
    extension: '.webp',
    folder: 'frames',
  };

  let images = [];
  let currentAnimation = '';
  let isPlaying = false;

  function preloadImages(folderName, callback) {
    const sequence = [];
    let loaded = 0;
    for (let i = 1; i <= config.frameCount; i++) {
      const num = String(i).padStart(3, '0');
      const img = new Image();
      img.src = `${config.folder}/${folderName}/frame${num}${config.extension}`;
      img.onload = () => {
        loaded++;
        if (loaded === config.frameCount) callback(sequence);
      };
      sequence.push(img);
    }
  }

  function drawFrame(image) {
    ctx.clearRect(0, 0, config.frameWidth, config.frameHeight);
    ctx.drawImage(image, 0, 0, config.frameWidth, config.frameHeight);
  }

  function playSequence(folderName) {
    if (isPlaying || folderName === currentAnimation) return;
    isPlaying = true;
    currentAnimation = folderName;

    preloadImages(folderName, (sequence) => {
      images = sequence;
      let index = 0;

      const interval = setInterval(() => {
        drawFrame(images[index]);
        index++;
        if (index >= images.length) {
          clearInterval(interval);
          isPlaying = false;
        }
      }, 1000 / config.fps);
    });
  }

  // Show the first frame on load (optional)
  window.onload = () => {
    preloadImages('drone-to-laser', (sequence) => {
      drawFrame(sequence[0]);
    });
  };
</script> -->


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

</body>
</html>
